{% extends 'layout.html' %}
{% block title %}Outgoing Requests{% endblock %}
{% block classdash %}<a class="nav-link" href="../home">{% endblock %}
  {% block classfind %}<a class="nav-link " href="{{ url_for('matching.search') }}">{% endblock %}
  {% block classreq %}<a class="nav-link " href="{{ url_for('matching.pending') }}">{% endblock %}
  {% block classreqa %}<a class="nav-link active" href="{{ url_for('matching.outgoing') }}">{% endblock %}
  {% block classmat %}<a class="nav-link" href="{{ url_for('matching.matched') }}">{% endblock %}
  {% block classprof %}<a class="nav-link " href="{{ url_for('home.profile') }}">{% endblock %}
  {% block classmast %}<a class="nav-link " href="{{ url_for('master.show') }}">{% endblock %}
{% block pagename %}<li class="breadcrumb-item text-sm text-white active" aria-current="page">Outgoing Requests</li>{% endblock %}
{% block pagename_large %}Outgoing Requests{% endblock %}

{% block content %}
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header pb-0">
            <h6>Outgoing Requests</h6>
          </div>
          <div class="card-body px-0 pt-0 pb-2">
            <span id="outgoingTable"></span>
          </div>
        </div>
      </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
      function listMatches(response)
      {
        $('#outgoingTable').html(response);
      }
      let request = null;

      function getMatches()
      {
        //let sessionindex = $('#indexInput').val();
        let requestid = $('#deleteInput').val();
        let action = $('#deleteButton').val()
        console.log(requestid)
        console.log(action)
        
        if (request != null)
          request.abort();
        request =$.ajax(
          {
            type: 'POST',
            data: {"requestid": requestid, "action": action},
            url: '/matching/outgoingtable',
            success: listMatches
          }
        );
      }
      function refreshOutgoing()
      {
        if (request != null)
          request.abort();
        request =$.ajax(
          {
            type: 'POST',
            //data: {"requestid": requestid, "action": action},
            url: '/matching/outgoingtable',
            success: listMatches
          }
        );
      }
      function setup()
      {
        getMatches();
        //$('#deleteButton').on('click', getMatches);
        window.setInterval(refreshOutgoing, 1000);
      }
      $('document').ready(setup);
  </script>
{% endblock %}
