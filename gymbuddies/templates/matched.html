{% extends 'layout.html' %}
{% block title %}Matches{% endblock %}
{% block classdash %}<a class="nav-link" href="../home">{% endblock %}
  {% block classfind %}<a class="nav-link " href="{{ url_for('matching.search') }}">{% endblock %}
  {% block classreq %}<a class="nav-link " href="{{ url_for('matching.pending') }}">{% endblock %}
  {% block classmat %}<a class="nav-link active" href="{{ url_for('matching.matched') }}">{% endblock %}
  {% block classprof %}<a class="nav-link " href="{{ url_for('home.profile') }}">{% endblock %}
  {% block classmast %}<a class="nav-link " href="{{ url_for('master.show') }}">{% endblock %}
{% block pagename %}<li class="breadcrumb-item text-sm text-white active" aria-current="page">Matches</li>{% endblock %}
{% block pagename_large %} Matches{% endblock %}

{% block content %}
  <!-- <p>You have no matches at this time.</p> -->
    <!--<div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header pb-0 px-3">
            <h6 class="mb-0">Pending</h6>
          </div>
          <div class="card-body pt-4 p-3">
            <ul class="list-group">
              <li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg">
                <div class="d-flex flex-column">
                  <h6 class="mb-3 text-sm">Oliver Liam</h6>
                  <span class="mb-2 text-xs">Bio: <span class="text-dark font-weight-bold ms-sm-2">interested in finding someone who I can consistently do arm day with</span></span>
                  <span class="mb-2 text-xs">Interests: <span class="text-dark ms-sm-2 font-weight-bold">Arms, Legs</span></span>
                  <span class="text-xs">Level: <span class="text-dark ms-sm-2 font-weight-bold">Beginner</span></span>
                </div>
                <div class="ms-auto text-end">
                  <a class="btn btn-link text-danger text-gradient px-3 mb-0" href="javascript:;"><i class="far fa-trash-alt me-2"></i>Delete</a>
                  <a class="btn btn-link text-dark px-3 mb-0" href="javascript:;"><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Accept</a>
                </div>
              </li>
              <li class="list-group-item border-0 d-flex p-4 mb-2 mt-3 bg-gray-100 border-radius-lg">
                <div class="d-flex flex-column">
                  <h6 class="mb-3 text-sm">Lucas Harper</h6>
                  <span class="mb-2 text-xs">Bio: <span class="text-dark font-weight-bold ms-sm-2">been going to the gym for a while and want to meet someone who will challenge me : )</span></span>
                  <span class="mb-2 text-xs">Interests: <span class="text-dark ms-sm-2 font-weight-bold">Cardio, Lifting</span></span>
                  <span class="text-xs">Level: <span class="text-dark ms-sm-2 font-weight-bold"> Intermediate</span></span>
                </div>
                <div class="ms-auto text-end">
                  <a class="btn btn-link text-danger text-gradient px-3 mb-0" href="javascript:;"><i class="far fa-trash-alt me-2"></i>Delete</a>
                  <a class="btn btn-link text-dark px-3 mb-0" href="javascript:;"><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Accept</a>
                </div>
              </li>
              <li class="list-group-item border-0 d-flex p-4 mb-2 mt-3 bg-gray-100 border-radius-lg">
                <div class="d-flex flex-column">
                  <h6 class="mb-3 text-sm">Ethan James</h6>
                  <span class="mb-2 text-xs">Bio: <span class="text-dark font-weight-bold ms-sm-2">really trying to focus on upper body this semester & looking for a partner who is experienced!</span></span>
                  <span class="mb-2 text-xs">Interests: <span class="text-dark ms-sm-2 font-weight-bold">Chest, Arms</span></span>
                  <span class="text-xs">Level: <span class="text-dark ms-sm-2 font-weight-bold">Intermediate</span></span>
                </div>
                <div class="ms-auto text-end">
                  <a class="btn btn-link text-danger text-gradient px-3 mb-0" href="javascript:;"><i class="far fa-trash-alt me-2"></i>Delete</a>
                  <a class="btn btn-link text-dark px-3 mb-0" href="javascript:;"><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Accept</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div> -->
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header pb-0">
            <h6>Completed</h6>
          </div>
          <div class="card-body px-0 pt-0 pb-2">
            <span id="matchesTable"></span>
          </div>
        </div>
      </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
      function listMatches(response)
      {
        $('#matchesTable').html(response);
      }
      let request = null;

      function getMatches()
      {
        //let sessionindex = $('#indexInput').val();
        let requestid = $('#unmatchInput').val();
        let action = $('#unmatchButton').val()
        console.log(requestid)
        console.log(action)
        
        if (request != null)
          request.abort();
        request =$.ajax(
          {
            type: 'POST',
            data: {"requestid": requestid, "action": action},
            url: '/matching/matchedtable',
            success: listMatches
          }
        );
      }
      function refreshMatches()
      {
        if (request != null)
          request.abort();
        request =$.ajax(
          {
            type: 'POST',
            //data: {"requestid": requestid, "action": action},
            url: '/matching/matchedtable',
            success: listMatches
          }
        );
      }
      function setup()
      {
        getMatches();
        //$('#deleteButton').on('click', getMatches);
        window.setInterval(refreshMatches, 1000);
      }
      $('document').ready(setup);
  </script>
{% endblock %}
